(window.MIP=window.MIP||[]).push({name:"mip-audio",func:function(){define("mip-audio/mip-audio",["require","util","customElement"],function(i){function t(i){var t={};return Array.prototype.slice.apply(i).forEach(function(i){t[i.name]=i.value}),t}function e(i){this.audioAttrs=i.audioAttrs,this.container=i.audioContainer,this.content=i.audioContent,this.customControls=i.audioContainer.querySelector(i.audioCustomCtr)||"",this.totalTimeShown=!1}var o=i("util"),a=i("customElement").create(),n=["autoplay","buffered","loop","autoplay","muted","played","preload","src","volume"];return a.prototype.firstInviewCallback=function(){var i=this.element;if(!i.rendered){i.rendered=!0;var o=t(this.element.attributes);new e({audioAttrs:o,audioContent:i.childNodes,audioContainer:i,audioCustomCtr:o.customcontrols||null}).init()}},e.prototype={constructor:e,init:function(){var i=this;this.audioElement=this._createAudioTag();for(var t=this.content.length,e=0;e<t;e++)this.audioElement.appendChild(this.content[0]);if(this.container.appendChild(this.audioElement),this.audioElement.load(),"controls"in this.audioAttrs){if(!this.customControls)this.customControls=this._createDefaultController(),this.container.classList.add("mip-audio-default-style"),this.container.innerHTML+=this.customControls;else this.container.appendChild(this.customControls);this.audioElement.addEventListener("loadedmetadata",i._applyTotalTime.bind(this),!1),this.container.querySelector(".mip-audio-play-pause").addEventListener("click",i._playOrPause.bind(this),!1),this.audioElement.addEventListener("timeupdate",i._timeUpdate.bind(this),!1),this._bindSeekEvent(),this.audioElement.addEventListener("ended",i._playEnded.bind(this),!1)}},_createAudioTag:function(){var i=document.createElement("audio");for(var t in this.audioAttrs)if(this.audioAttrs.hasOwnProperty(t)&&n.indexOf(t)>-1)i.setAttribute(t,this.audioAttrs[t]);return i.classList.add("mip-audio-tag"),i},_createDefaultController:function(){return'<div class="mip-audio-controller"><i class="mip-audio-play-pause mip-audio-stopped-icon"></i><div class="mip-audio-time-current">00:00</div><div class="mip-audio-seekbar"><div class="mip-audio-seekbar-fill"></div><div class="mip-audio-seekbar-btn"></div></div><div class="mip-audio-time-total">--:--</div></div>'},_playOrPause:function(i){var t=this.container.querySelector(".mip-audio-play-pause").classList;if(!this.audioElement.paused||"pause"===i)this.audioElement.pause(),t.remove("mip-audio-playing-icon"),t.add("mip-audio-stopped-icon");else this.audioElement.play(),t.remove("mip-audio-stopped-icon"),t.add("mip-audio-playing-icon")},_playEnded:function(){this._playOrPause("pause"),this._timeUpdate(0)},_progressShow:function(){var i=this.audioElement.currentTime,t=i/this.audioElement.duration*100;o.css(this.container.querySelector(".mip-audio-seekbar-btn"),"left",t+"%"),o.css(this.container.querySelector(".mip-audio-seekbar-fill"),"width",t+"%")},_applyTotalTime:function(){var i=this.audioElement.duration,t=this._msToDate(i);this.container.querySelector(".mip-audio-time-total").innerHTML=t},_timeUpdate:function(i){var t;if(!this.totalTimeShown)this._applyTotalTime(),this.totalTimeShown=!0;if("number"==typeof i)t=this.audioElement.duration*i,this.audioElement.currentTime=t;if(this._progressShow(),t=this._msToDate(this.audioElement.currentTime),this.audioElement.currentTimeShown!==t)this.audioElement.currentTimeShown=t,this.container.querySelector(".mip-audio-time-current").innerHTML=t},_bindSeekEvent:function(){var i,t,e,o,a=this.container.querySelector(".mip-audio-seekbar-btn"),n=this.container.querySelector(".mip-audio-seekbar"),u=n.getBoundingClientRect(),d={left:u.left,width:u.width,right:u.right},s=this,r="paused",p="ontouchmove"in document?"touch":"mouse";a.addEventListener("touch"===p?"touchstart":"mousedown",function(e){var n="ontouchmove"in document?e.touches[0]:e;i=n.clientX,t=a.offsetLeft+.5*a.offsetWidth,r=s.audioElement.paused?"paused":"playing",o=!0,s.audioElement.pause()},!1),this.container.addEventListener(p+"move",function(a){if(o){a.preventDefault(),a.stopPropagation();var n="ontouchmove"in document?a.touches[0]:a,u=n.clientX,r=u-i;if(u>=d.right+10)e=.9999;else if(t+r<=0)e=0;else e=(t+r)/d.width;s._timeUpdate.call(s,e)}},!1),a.addEventListener("touch"===p?"touchend":"mouseup",function(i){if(o=!1,"playing"===r)s.audioElement.play()},!1)},_msToDate:function(i){var t=parseInt(i,10),e=0,o=0;if(t>60)if(e=parseInt(t/60,10),t=parseInt(t%60,10),e>60)o=parseInt(e/60,10),e=parseInt(e%60,10);if(parseInt(t,10)<10)t="0"+parseInt(t,10);var a=""+t;if(0===e)a="00:"+a;if(e>0)a=parseInt(e,10)+":"+a;if(o>0)a=parseInt(o,10)+":"+a;return a}},a}),define("mip-audio",["mip-audio/mip-audio"],function(i){return i}),function(){function i(i,t){i.registerMipElement("mip-audio",t,"mip-audio.mip-audio-default-style{font-size:0;width:100%;max-width:500px;min-width:180px;-webkit-tap-highlight-color:transparent;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}mip-audio.mip-audio-default-style .mip-audio-controller{background-color:#434343;border-radius:5px;padding:10px 15px;box-sizing:border-box;position:relative;display:-webkit-flex;display:flex;align-items:center;height:100%}mip-audio.mip-audio-default-style .mip-audio-play-pause{width:20px;height:20px;box-sizing:content-box;padding:10px;margin:-10px;vertical-align:top;background-size:42px 20px;background-clip:content-box;flex:0 0 auto}mip-audio.mip-audio-default-style .mip-audio-play-pause.mip-audio-stopped-icon{background-image:url('https://mipcache.bdstatic.com/static/static/auido/audioimg.png');background-position:9px 11px}mip-audio.mip-audio-default-style .mip-audio-play-pause.mip-audio-playing-icon{background-image:url('https://mipcache.bdstatic.com/static/static/auido/audioimg.png');background-position:-13px 11px}mip-audio.mip-audio-default-style .mip-audio-seekbar{width:120px;height:8px;box-sizing:border-box;background-color:#818181;border:1px solid #989898;margin-left:15px;margin-top:1px;position:relative;border-radius:8px;flex-grow:2}mip-audio.mip-audio-default-style .mip-audio-seekbar-fill{height:6px;background-color:#414141;position:absolute;top:50%;margin-top:-3px;border-radius:8px}mip-audio.mip-audio-default-style .mip-audio-seekbar-btn{width:20px;background-color:#fff;height:20px;border-radius:10px;position:absolute;left:0;top:50%;margin-top:-10px;margin-left:-10px}mip-audio.mip-audio-default-style .mip-audio-time-current,mip-audio.mip-audio-default-style .mip-audio-time-total{font-size:13px;color:#fff;margin-left:10px;min-width:40px;white-space:nowrap;flex:0 0}mip-audio.mip-audio-default-style .mip-audio-time-total{margin:0 0 0 20px}")}if(window.MIP)require(["mip-audio"],function(t){i(window.MIP,t)});else require(["mip","mip-audio"],i)}()}});